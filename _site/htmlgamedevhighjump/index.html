<!DOCTYPE html> <html lang="en-US"> <head prefix="og: http://ogp.me/ns#"> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="ie=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <meta name="mobile-web-app-capable" content="yes" /> <meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="application-name" content="Janessa Tran" /> <meta name="apple-mobile-web-app-status-bar-style" content="#fff" /> <meta name="apple-mobile-web-app-title" content="Janessa Tran" /> <title> Adding the Ability to High Jump - Janessa Tran </title> <link rel="alternate" href="http://localhost:4000/htmlgamedevhighjump/" hreflang="en-US" /> <link rel="canonical" href="http://localhost:4000/htmlgamedevhighjump/" /> <meta name="description" content="Full-stack software engineer" /> <meta name="referrer" content="no-referrer-when-downgrade" /> <meta property="fb:app_id" content="" /> <meta property="og:site_name" content="Adding the Ability to High Jump | " /> <meta property="og:title" content="Adding the Ability to High Jump | " /> <meta property="og:type" content="website" /> <meta property="og:url" content="http://localhost:4000/htmlgamedevhighjump/" /> <meta property="og:description" content="Full-stack software engineer" /> <meta property="og:image" content="http://localhost:4000/assets/img/me.png" /> <meta property="og:image:width" content="640" /> <meta property="og:image:height" content="640" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:title" content="Adding the Ability to High Jump | janessatran_" /> <meta name="twitter:url" content="http://localhost:4000/htmlgamedevhighjump/" /> <meta name="twitter:site" content="@janessatran_" /> <meta name="twitter:creator" content="@janessatran_" /> <meta name="twitter:description" content="Full-stack software engineer" /> <meta name="twitter:image" content="http://localhost:4000/assets/img/me.png" /> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Janessa Tran" /> <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png" /> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png" /> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png" /> <link rel="manifest" href="/assets/favicons/site.webmanifest" /> <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#5bbad5" /> <meta name="apple-mobile-web-app-title" content="Jekyll Klise" /> <meta name="application-name" content="Jekyll Klise" /> <meta name="msapplication-TileColor" content="#da532c" /> <meta name="theme-color" content="#2c2c2c" /> <link rel="stylesheet" href="/assets/css/style.css" /> </head> <body data-theme="dark" class="notransition"> <script> const body = document.body; const data = body.getAttribute("data-theme"); const initTheme = (state) => { if (state === "dark") { body.setAttribute("data-theme", "dark"); } else if (state === "light") { body.removeAttribute("data-theme"); } else { localStorage.setItem("theme", data); } }; initTheme(localStorage.getItem("theme")); setTimeout(() => body.classList.remove("notransition"), 75); </script> <div class="navbar" role="navigation"> <nav class="menu"> <input type="checkbox" id="menu-trigger" class="menu-trigger" /> <label for="menu-trigger"> <span class="menu-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512"> <path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z" /> </svg> </span> </label> <a id="mode"> <svg class="mode-sunny" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512"> <title>LIGHT</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> <svg class="mode-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512"> <title>DARK</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> </a> <div class="trigger"> <div class="trigger-container"><a class="menu-link" href="/">home</a><a class="menu-link" href="/archive/">archive</a><a class="menu-link" href="/projects/">projects</a><a class="menu-link rss" href="/feed.xml"> <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 512 512" fill="#ED812E"> <title>RSS</title> <path d="M108.56,342.78a60.34,60.34,0,1,0,60.56,60.44A60.63,60.63,0,0,0,108.56,342.78Z" /> <path d="M48,186.67v86.55c52,0,101.94,15.39,138.67,52.11s52,86.56,52,138.67h86.66C325.33,312.44,199.67,186.67,48,186.67Z" /> <path d="M48,48v86.56c185.25,0,329.22,144.08,329.22,329.44H464C464,234.66,277.67,48,48,48Z" /> </svg> </a> </div> </div> </nav> </div> <div class="wrapper post"> <main class="page-content" aria-label="Content"> <article itemscope itemtype="https://schema.org/BlogPosting"> <header class="header"> <div class="tags"> <span itemprop="keywords"> <a class="tag" href="/tags/#game-dev">GAME DEV</a> </span> </div> <h1 class="header-title" itemprop="headline">Adding the Ability to High Jump</h1> <div class="post-meta"> <time datetime="2021-01-14T00:00:00-08:00" itemprop="datePublished"> Jan 14, 2021 </time> <time hidden datetime="" itemprop="dateModified"> Jan 14, 2021 </time> <span hidden itemprop="publisher" itemtype="Person">Janessa Tran</span> <span hidden itemprop="image"></span> <span hidden itemprop="mainEntityOfPage"><p><em>Psst! This is the fourth post in my series on learning html game development. You can find the other posts <a href="https://www.janessatran.com/tags/#game-dev">here</a>!</em></p> </span> </div> </header> <div class="page-content" itemprop="articleBody"> <p><em>Psst! This is the fourth post in my series on learning html game development. You can find the other posts <a href="https://www.janessatran.com/tags/#game-dev">here</a>!</em></p> <p>This next section is going to cover how I added the ability to “high jump” (or fly, because you can technically continue to stay in the air 😂) into the game. This was probably one of the trickier features for me to figure out how to implement, partially due to my lack of experience with playing games and not knowing what a “high jump” even is. Nevertheless… let’s get into how to add this feature!</p> <h2 id="enabling-flappy-bird-mode"> <a href="#enabling-flappy-bird-mode" class="anchor-head"></a> Enabling Flappy Bird Mode </h2> <p>In this game, a “high jump” is essentially having the ability to jump while you are already jumping. Theoretically, this means you can continuously jump while already “jumping”, emulating a flappy-bird-like flying motion. Jumping is initiated when the user presses the up-arrow key. In order to add a “high jump”, then, we need to check if the player is already jumping to boost it.</p> <p>We can do this by making use of a method called <code class="language-plaintext highlighter-rouge">downDuration</code> from <code class="language-plaintext highlighter-rouge">Phaser.Key</code>.</p> <p>This method takes a parameter to define the duration within which a key is considered to have just been pressed. For example, if we pass in <code class="language-plaintext highlighter-rouge">downDuration(200)</code>, it will check if the last key pressed was less than 200 ms ago, if so, return true.</p> <p><img src="https://i.imgur.com/YiTcmet.png" alt="Image of Phaser Docs" /> Source: <a href="https://phaser.io/docs/2.6.2/Phaser.Key.html#duration">https://phaser.io/docs/2.6.2/Phaser.Key.html#duration</a></p> <p>We can use this to check whether or not the additional jump (resulting from pressing the “up” key again after already having pressed it), was done within a short enough time frame that we can make the sprite “high jump”.</p> <p>We’ve already defined the signal event in <code class="language-plaintext highlighter-rouge">PlayState.init()</code> so we can modify it to add in this feature:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">PlayState</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
   <span class="p">...</span>
    <span class="c1">// Subscribe key to signal (event)</span>
    <span class="kd">const</span> <span class="nx">JUMP_HOLD</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">keys</span><span class="p">.</span><span class="nx">up</span><span class="p">.</span><span class="nx">onDown</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">keys</span><span class="p">.</span><span class="nx">up</span><span class="p">.</span><span class="nx">downDuration</span><span class="p">(</span><span class="nx">JUMP_HOLD</span><span class="p">))</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">didJump</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">hero</span><span class="p">.</span><span class="nx">jump</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">didJump</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">sfx</span><span class="p">.</span><span class="nx">jump</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">hero</span><span class="p">.</span><span class="nx">stopHighJump</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">},</span> <span class="k">this</span><span class="p">)</span>
    <span class="p">...</span>
<span class="p">};</span>
</code></pre></div></div> <p>We also modify the <code class="language-plaintext highlighter-rouge">Hero</code> class <code class="language-plaintext highlighter-rouge">jump</code> method, which previously set the y-velocity only if <code class="language-plaintext highlighter-rouge">canJump</code> was true (when the body of the sprite is touching the platform sprites).</p> <p>The modification involves making it so that if <code class="language-plaintext highlighter-rouge">this.highJumping</code> is true, it will <em>also</em> set the y velocity.</p> <p><em>Note:</em> <em>a negative velocity means the sprite will move in the opposite direction.</em></p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">Hero</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">jump</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">JUMP_SPEED</span> <span class="o">=</span> <span class="mi">400</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">canJump</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">touching</span><span class="p">.</span><span class="nx">down</span><span class="p">;</span> <span class="c1">// check if a body is touching another body</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">canJump</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">highJumping</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">velocity</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="nx">JUMP_SPEED</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">highJumping</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">canJump</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <p>Lastly, we want to ensure that the high jump only works if the body is already jumping. If it’s not already jumping (which we know from our signal event on the up-arrow key), we want to stop the high jump.</p> <p>We create a method <code class="language-plaintext highlighter-rouge">stopHighJump</code> that we call in the initialization of our <code class="language-plaintext highlighter-rouge">PlayState</code> to set <code class="language-plaintext highlighter-rouge">highJumping</code> to false, preventing the body from continuously increasing in velocity:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">Hero</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">stopHighJump</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">highJumping</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="jump-tastic"> <a href="#jump-tastic" class="anchor-head"></a> Jump-tastic! </h2> <p>There you have it, the ability to high jump! Let me know if you are able to win the game without collecting any coins or killing any spiders 😉</p> <ul> <li><strong>Source code</strong>: <a href="https://github.com/janessatran/html5game/commit/17ffabc93a08845db41fa84be25380a906f71f7b">Add high jump ability commit</a></li> <li><strong>Link to game</strong>: <a href="https://janessatran.github.io/html5game/">Adventures of Leat</a></li> </ul> </div> </article> </main> <nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/htmlgamemusic/" > <div class="nav-arrow">Previous</div> <span class="post-title">Adding Music to the Game</span> </a> <a class="post-nav-item post-nav-next" href="/htmlgamedevherodyinganimation/"> <div class="nav-arrow">Next</div> <span class="post-title">Animating the Hero's Death</span> </a> </nav> <footer class="footer"> <a class="footer_item" href="/thanks">ack.</a> <!-- <a class="footer_item" href="/assets/resume.pdf" download>resume</a> --> <a class="footer_item" href="/feed.xml">rss</a> <span class="footer_item">&copy; 2023</span> <small class="footer_copyright"> <!-- Klisé Theme: https://github.com/piharpi/jekyll-klise --> <a href="https://github.com/piharpi/jekyll-klise" target="_blank" rel="noreferrer noopener" >klisé</a > theme on <a href="https://jekyllrb.com" target="_blank" rel="noreferrer noopener" >jekyll</a > </small> </footer> <script src="/assets/js/main.js" defer="defer"></script> </div> </body> </html>
